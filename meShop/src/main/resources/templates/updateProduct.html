<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Update User</title>

<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
</head>
<body>
	<div class="container">
		<h1>Web Management System</h1>
		<hr>
		<h2>Update User</h2>

		<form action="#" th:action="@{/saveProduct}" th:object="${productDTO}" enctype="multipart/form-data"
			method="POST">
			<input type="hidden" th:field="*{id}" />
			<label>Title: </label><input type="text" th:field="*{title}" class="form-control mb-4 col-4" required>
			<label>Category: </label>
			<select th:field="*{categoryId}">
			  <option value="">None</option>
		    	<option th:selected="*{categoryId}" th:each="cate : ${cateList}" th:value="${cate.id}" th:text="${cate.getName()}"></option>	
			</select>
			<br>
			<label>Price: </label><input type="text" th:field="*{price}" class="form-control mb-4 col-4" required>
			<br>
			<br>
			<input type="hidden" id="imageBase64" th:field="*{image}" readonly></input>
  			<img width="200" id="output" class='img-thumbnail' th:src="'data:image/jpeg;base64,' + ${image}" />
  			<label>Photos: </label>
  			<input type="file" name="photo" accept="image/png, image/jpeg" onchange="loadFile(event)"/>
      		<script>
          		var loadFile = function(event) {
              var image = document.getElementById('output');
              image.src=URL.createObjectURL(event.target.files[0]);};
              //<option th:each="cate : ${cateList}" th:value="${cate}" th:text="${cate.getName()}"></option>	
              //var changeCategory=function(event){
            	 // var selectionCate=document.getElementById("selectionCate");
            	 // document.getElementById("categoryId").value = selectionCate.value;
            	  //document.getElementById("categoryId").value =2;
              //};
              //enctype="multipart/form-data"
             // <label>Photos: </label>
  			//<input type="file" name="photo" accept="image/png, image/jpeg" onchange="loadFile(event)"/>
      </script>
      <br>
			<button type="submit" class="btn btn-info col-2"> Update Product</button>
		</form>
		
		<hr>
		
		<a th:href = "@{/productIndex}"> Back to Product List</a>
	</div>
</body>
</html>